# This is a basic workflow to show the manual trigger
name: Manual-Actions-Workflow

on: 
  workflow_dispatch:
    inputs:
      logLevel:
        description: 'Log level'     
        required: true
        default: 'warning'
      tags:
        description: 'Test scenario tags'
      instance:
        description: Instance URL or name from config.yaml
        required: true
      region:
        description: 'Region metadata expected (na, emea, apac)'
        required: true
        default: na
      instanceType:
        description: 'Instance type (stg, dev)'
        required: true
        default: stg
jobs:
 
 build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: Say something
      run: echo "${{github.event.inputs.instanceType }}"
    
    - run: |
        echo "Log level: ${{ github.event.inputs.logLevel }}"
        echo "Tags: ${{ github.event.inputs.tags }}"
        echo "github.event.inputs.instanceType"
    - name: Approval 
      if: github.event.inputs.instanceType == 'dev'
      uses: trstringer/manual-approval@v1.9.0
      with:
        # Required approvers
        approvers: Erage
        # Secret
        secret:  ${{github.TOKEN}}
        # Minimum number of approvals to progress workflow
        minimum-approvals: 1 # optional
        # The custom subtitle for the issue
        issue-title:  testing the Approval process  # optional
        # The custom body for the issue
        issue-body:  testing the Approval process  # optional
        # Whether or not to filter out the user who initiated the workflow as an approver if they are in the approvers list
        exclude-workflow-initiator-as-approver: false # optional
        # Comma separated list of words that can be used to approve beyond the defaults.
            
   
